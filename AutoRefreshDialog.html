<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Auto Refresh</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../../lib/tableau.extensions.1.latest.js"></script>
    <script src="./AutoRefresh.js"></script>
    <style>
      body {
        background: linear-gradient(135deg, #f0f4ff, #ffffff);
        font-family: "Segoe UI", Tahoma, sans-serif;
        color: #333;
      }
      .container {
        background: #fff;
        max-width: 600px;
        margin: 50px auto;
        padding: 36px 42px;
        border-radius: 12px;
        box-shadow: 0 10px 28px rgba(0,0,0,0.08);
        animation: fadeIn 0.4s ease-out;
        text-align: center;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .logo-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }
      .logo-bar img {
        max-height: 60px;
      }
      h4 {
        font-weight: 600;
        margin-bottom: 10px;
        color: #222;
      }
      p.text-muted {
        font-size: 15px;
        margin-bottom: 20px;
      }
      #active {
        margin-top: 20px;
      }
      #clock {
        font-size: 28px;
        font-weight: bold;
        color: #007bff;
        background: #f8faff;
        padding: 14px 20px;
        border-radius: 10px;
        display: inline-block;
        box-shadow: 0 4px 12px rgba(0,123,255,0.15);
      }
      #inactive {
        margin-top: 40px;
        color: #777;
      }
      #inactive p {
        margin-top: 15px;
        font-size: 15px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="logo-bar">
        <img src="images.png" alt="Left Logo">
        <img src="logo prosperitas.png" alt="Right Logo">
      </div>

      <h4>Auto Data Source Refresh</h4>
      <p class="text-muted">Your datasources will auto-refresh at the set interval.</p>

      <!-- Active State -->
      <div id="active" style="display: none;">
        <div id="clock">--:--:--</div>
        <p style="margin-top: 15px;">
          Refreshing <b><span id="datasourceCount">0</span></b> datasource(s) 
          every <b><span id="interval">5</span></b> seconds.
        </p>
        <p>Unique datasources: <b><span id="uniqueCount">0</span></b></p>
      </div>

      <!-- Inactive State -->
      <div id="inactive">
        <img src="images.png" style="width: 40%; min-width: 180px;">
        <p>Configure extension to proceed.</p>
      </div>
    </div>

    <script>
      // Update live clock every second
      function updateClock() {
        const now = new Date();
        const time = now.toLocaleTimeString();
        $('#clock').text(time);
      }
      setInterval(updateClock, 1000);
      updateClock();
    </script>
  </body>
</html>
